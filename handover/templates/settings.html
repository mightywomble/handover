{% extends "base.html" %}
{% block title %}User Settings{% endblock %}
{% block content %}
<header class="mb-10">
    <h1 class="text-3xl font-bold text-white">User Management</h1>
    <p class="text-gray-400 mt-1">Promote users to the Admin role.</p>
</header>
<main class="bg-gray-800/50 border border-gray-700 p-8 rounded-lg shadow-lg">
    <div class="overflow-x-auto">
        <table class="min-w-full">
            <thead class="border-b border-gray-700">
                <tr>
                    <th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Email</th>
                    <th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Current Role</th>
                    <th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Change Role</th>
                    <th scope="col" class="relative px-3 py-2"><span class="sr-only">Save</span></th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-700">
                {% for user in users %}
                <tr>
                    <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-300">{{ user.email }}</td>
                    <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-300">{{ user.role }}</td>
                    <form action="{{ url_for('handover.settings') }}" method="post">
                        <input type="hidden" name="user_id" value="{{ user.id }}">
                        <td class="px-3 py-4 whitespace-nowrap text-sm">
                            <select name="role" class="form-select rounded-md shadow-sm text-sm">
                                <option value="Engineer" {% if user.role == 'Engineer' %}selected{% endif %}>Engineer</option>
                                <option value="Admin" {% if user.role == 'Admin' %}selected{% endif %}>Admin</option>
                            </select>
                        </td>
                        <td class="px-3 py-4 whitespace-nowrap text-right text-sm font-medium">
                            <button type="submit" class="text-indigo-400 hover:text-indigo-300">Save</button>
                        </td>
                    </form>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</main>
{% endblock %}
